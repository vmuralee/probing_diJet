#include "TFile.h"
#include "TROOT.h"
#include "TSystem.h"
#include "RooWorkspace.h"
#include "RooAbsData.h"
#include "RooRealVar.h"
 
#include "RooStats/ModelConfig.h"
#include "RooStats/ProfileLikelihoodCalculator.h"
#include "RooStats/LikelihoodInterval.h"
#include "RooStats/LikelihoodIntervalPlot.h"

using namespace RooFit;
using namespace RooStats;

struct ProfileLikelihoodOptions {
 
   double confLevel = 0.95;
   int nScanPoints = 50;
   bool plotAsTF1 = false;
   double poiMinPlot = 1;
   double poiMaxPlot = 0;
   bool doHypoTest = false;
   double nullValue = 0;
};

ProfileLikelihoodOptions optPL;
 
void StandardProfileLikelihoodDemo(const char *infile = "model.root", const char *workspaceName = "combined",
                                   const char *modelConfigName = "ModelConfig", const char *dataName = "obsData")
{
  double confLevel = optPL.confLevel;
  double nScanPoints = optPL.nScanPoints;
  bool plotAsTF1 = optPL.plotAsTF1;
  double poiXMin = optPL.poiMinPlot;
  double poiXMax = optPL.poiMaxPlot;
  bool doHypoTest = optPL.doHypoTest;
  double nullParamValue = optPL.nullValue;

  const char* filename = infile;
  TFile *file = TFile::Open(filename);

  // get the workspace out of the file
  RooWorkspace *w = (RooWorkspace *)file->Get(workspaceName);
  
}

